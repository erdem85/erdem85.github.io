
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>erdemhacisalihoglu</title>
	<meta name="theme-color" content="#ffffff" />
	<meta property="og:type" content="website" />
	<meta name="og:title" property="og:title" content="erdemhacisalihoglu" />
	<meta property="og:url" content="https://erdem.js.org/" />
	<link rel="canonical" href="https://erdem.js.org" />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/hackclub/css@79ee8661dfe9ab17af7d35cd8d9d7373029a8919/theme.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel="preload" href="NanumPen.woff2" as="font" type="font/woff2" crossorigin>

  </head>
  <body>
    <div id="container">
    <!-- <img id="avatar" style="border-radius: 50%;" src=""/> -->
     <h1 class="title">erdem</h1>
     <h3 class="headline" style="color: var(--white); padding-bottom: 10px;"><i id="statusicon" class="fa-brands fa-spotify"></i>
        <a id="statustext" style="color: var(--white); font-size: 20px;">i'm not listening to anything right now</a>
    </h3>
     <h4 style="color: var(--blue)">
        <a href="https://github.com/erdem85"><i class="fa-brands fa-github icons"></i></a>
        <a href="https://steamcommunity.com/id/erdemeth/"><i class="fa-brands fa-steam icons" aria-hidden="true"></i></a>
        <a href="https://www.last.fm/user/erdempro"><i class="fa-brands fa-lastfm icons"></i></a>
        <a href="https://www.linkedin.com/in/erdemhacisalihoglu/"><i class="fa-brands fa-linkedin icons"></i></a>
        <a href="https://twitter.com/erdmeth"><i class="fa-brands fa-twitter icons"></i></a>
        <a href="https://discord.com/users/889937921073881138"><i class="fa-brands fa-discord icons"></i></a>
        
        
     </h4>
    </div>
  </body>
  <script>
    let content = document.getElementById("statustext");
    let icon = document.getElementById("statusicon");
    // fa-brands fa-spotify
    // fa-solid fa-gamepad
    let webSocket = new WebSocket("wss://api.lanyard.rest/socket");
    let discordID = "889937921073881138";
    
    fetch("https://api.lanyard.rest/v1/users/"+discordID).then(response => response.json()).then(e => {
        /**
         * if(e.data["discord_user"]){
         * document.getElementById("avatar").src = `https://cdn.discordapp.com/avatars/${discordID}/${e.data["discord_user"].avatar}.png?size=4096`
        }
        **/

        if(e.data["listening_to_spotify"]){
            content.innerText = `${e.data.spotify.song} - ${e.data.spotify.artist}`;
            content.href = `https://open.spotify.com/track/${e.data.spotify.track_id}`;

        }else if(e.data["activities"].length > 0){
            icon.className="fa-solid fa-gamepad";
            content.innerText = `Playing ${e.data["activities"][0].name}`;
        }
    });

    
    webSocket.addEventListener('message', (event) => {
        data = JSON.parse(event.data)
        console.log(data)

        if(event.data == "{\"op\":1,\"d\":{\"heartbeat_interval\":30000}}"){
            webSocket.send(JSON.stringify({
                op: 2,
                d: {
                    subscribe_to_id: discordID
                }
            }))
            setInterval(() => {
                socket.send(JSON.stringify({
                    op: 3,
                    d: {
                        heartbeat_interval: 30000
                    }
                }))
                
            }, 30000)
        }
        if(data.t == "PRESENCE_UPDATE"){
            if(data.d.spotify){
                icon.className="fa-brands fa-spotify";
                content.innerText = `${data.d.spotify.song} - ${data.d.spotify.artist}`;
                content.href = `https://open.spotify.com/track/${data.d.spotify.track_id}`;

            }else if(data.d.activities.length > 0){
                icon.className="fa-solid fa-gamepad";
                content.innerText = `Playing ${data.d.activities[0].name}`;
                content.href = "";
            }else{
                icon.className="fa-brands fa-spotify";
                content.innerText = `i'm not listening to anything right now`;
                content.href = "";
            }
        }
        
    })
  </script>
</html>
